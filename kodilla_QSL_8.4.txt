use kodilla_tester;

CREATE TABLE ISSUESLISTS (
    ID SERIAL PRIMARY KEY,
    NAME VARCHAR(100)
);

CREATE TABLE ISSUES (
    ID SERIAL PRIMARY KEY,
    ISSUESLIST_ID BIGINT UNSIGNED NOT NULL,
    SUMMARY VARCHAR(1024),
    DESCRIPTION VARCHAR(1024),
    USER_ID_ASSIGNEDTO BIGINT UNSIGNED NOT NULL,
    FOREIGN KEY (ISSUESLIST_ID)
        REFERENCES ISSUESLISTS (ID),
    FOREIGN KEY (USER_ID_ASSIGNEDTO)
        REFERENCES USERS (ID)
);

INSERT INTO ISSUESLISTS (NAME)
VALUES ("ToDo");
INSERT INTO ISSUESLISTS (NAME)
VALUES ("In progress");
INSERT INTO ISSUESLISTS (NAME)
VALUES ("DONE");

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, "Task at home", "Feed the cat", 5);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, "Tasks outside", "Take a walk",3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, "Tasks outside", "Mow the lawn",3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3,"Hobby", "Read a book",4);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES ( 3, "Tasks outside", "Buy a pony",2);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, "Tasks outside", "Take a ride on a pony",5);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES( 1, "Hobby", "Take a nap", 4);
COMMIT;

ALTER TABLE ISSUES
ADD CONSTRAINT CHECK_ISSUESLIST_ID 
CHECK (ISSUESLIST_ID IN (1,2,3));


SELECT * FROM ISSUESLISTS;
SELECT * FROM ISSUES;